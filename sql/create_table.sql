# 建表脚本

-- 创建库
create database if not exists my_db;

-- 切换库
use my_db;

-- 用户表
create table if not exists user
(
    id           bigint auto_increment comment 'id' primary key,
    userAccount  varchar(256)                           not null comment '账号',
    userPassword varchar(512)                           not null comment '密码',
    unionId      varchar(256)                           null comment '微信开放平台id',
    mpOpenId     varchar(256)                           null comment '公众号openId',
    userName     varchar(256)                           null comment '用户昵称',
    userAvatar   varchar(1024)                          null comment '用户头像',
    userProfile  varchar(512)                           null comment '用户简介',
    userRole     varchar(256) default 'user'            not null comment '用户角色：user/admin/ban',
    createTime   datetime     default CURRENT_TIMESTAMP not null comment '创建时间',
    updateTime   datetime     default CURRENT_TIMESTAMP not null on update CURRENT_TIMESTAMP comment '更新时间',
    isDelete     tinyint      default 0                 not null comment '是否删除',
    index idx_unionId (unionId)
) comment '用户' collate = utf8mb4_unicode_ci;

INSERT INTO user (userAccount, userPassword, unionId, mpOpenId, userName, userAvatar, userProfile, userRole, createTime,
                  updateTime, isDelete)
VALUES ('user1@example.com', 'password1', '', '', '张三', '', '我是张三，很高兴加入这个社区。', 'user', NOW(), NOW(), 0),
       ('user2@example.com', 'password2', '', '', '李四', '', '大家好，我是李四，喜欢交朋友。', 'user', NOW(), NOW(), 0),
       ('user3@example.com', 'password3', '', '', '王五', '', '大家好，我是王五，喜欢运动和旅行。', 'user', NOW(), NOW(),
        0),
       ('user4@example.com', 'password4', '', '', '赵六', '', '大家好，我是赵六，热爱学习和音乐。', 'user', NOW(), NOW(),
        0),
       ('user5@example.com', 'password5', '', '', '陈七', '', '大家好，我是陈七，喜欢摄影和美食。', 'user', NOW(), NOW(),
        0),
       ('user6@example.com', 'password6', '', '', '刘八', '', '大家好，我是刘八，对科技和编程很感兴趣。', 'user', NOW(),
        NOW(), 0),
       ('user7@example.com', 'password7', '', '', '杨九', '', '大家好，我是杨九，喜欢读书和写作。', 'user', NOW(), NOW(),
        0),
       ('user8@example.com', 'password8', '', '', '黄十', '', '大家好，我是黄十，爱好旅游和探索。', 'user', NOW(), NOW(),
        0),
       ('user9@example.com', 'password9', '', '', '孙十一', '', '大家好，我是孙十一，热衷于公益事业。', 'user', NOW(),
        NOW(), 0),
       ('user10@example.com', 'password10', '', '', '徐十二', '', '大家好，我是徐十二，喜欢电影和艺术。', 'user', NOW(),
        NOW(), 0),
       ('user11@example.com', 'password11', '', '', '郭十三', '', '大家好，我是郭十三，热爱运动和健身。', 'user', NOW(),
        NOW(), 0),
       ('user12@example.com', 'password12', '', '', '何十四', '', '大家好，我是何十四，对历史和文化有浓厚兴趣。', 'user',
        NOW(), NOW(), 0);


-- 帖子表
create table if not exists post
(
    id         bigint auto_increment comment 'id' primary key,
    title      varchar(512)                       null comment '标题',
    content    text                               null comment '内容',
    tags       varchar(1024)                      null comment '标签列表（json 数组）',
    thumbNum   int      default 0                 not null comment '点赞数',
    favourNum  int      default 0                 not null comment '收藏数',
    userId     bigint                             not null comment '创建用户 id',
    createTime datetime default CURRENT_TIMESTAMP not null comment '创建时间',
    updateTime datetime default CURRENT_TIMESTAMP not null on update CURRENT_TIMESTAMP comment '更新时间',
    isDelete   tinyint  default 0                 not null comment '是否删除',
    index idx_userId (userId)
) comment '帖子' collate = utf8mb4_unicode_ci;

INSERT INTO post (title, content, tags, thumbNum, favourNum, userId, createTime, updateTime, isDelete)
VALUES ('美食节目推荐',
        '我最近看了一档非常好看的美食节目，《美食之旅》，里面介绍了各种美食和背后的故事。推荐给大家一起观看！',
        '["美食", "推荐", "节目"]', 15, 8, 54321, '2023-07-06 14:20:00', '2023-07-07 11:30:00', 0),
       ('新技术分享',
        '最近有一项新技术非常火热，名为区块链。我在这里分享一些关于区块链的基础知识和应用领域，希望对大家有所帮助。',
        '["技术", "区块链", "分享"]', 12, 6, 98765, '2023-07-05 10:45:00', '2023-07-06 09:15:00', 0),
       ('健身心得体会',
        '我是一个健身爱好者，最近我在健身方面有了一些新的心得体会，包括锻炼方法、饮食搭配等等。分享给大家，希望对你们有所启发。',
        '["健身", "心得", "分享"]', 20, 10, 12345, '2023-07-04 15:30:00', '2023-07-05 12:40:00', 0),
       ('旅行心得分享',
        '我刚刚完成了一次环球旅行，去了很多国家和城市。在这里分享我的旅行心得和经历，希望能给你们带来一些旅行的灵感。',
        '["旅行", "心得", "分享"]', 18, 9, 13579, '2023-07-02 12:10:00', '2023-07-04 08:20:00', 0),
       ('编程技巧交流', '作为一名程序员，我在这里分享一些编程技巧和经验，希望和大家一起交流学习，共同进步。',
        '["编程", "技巧", "交流"]', 30, 15, 24680, '2023-07-03 08:00:00', '2023-07-05 16:30:00', 0),
       ('电影推荐', '我最近看了一部非常精彩的电影，《星际穿越》，剧情扣人心弦，特效震撼。推荐给大家一起观看！',
        '["电影", "推荐", "星际穿越"]', 22, 11, 54321, '2023-07-07 13:15:00', '2023-07-07 17:20:00', 0),
       ('新手摄影入门', '对于想要学习摄影的新手，我在这里分享一些入门知识和技巧，希望能够帮助到你们。',
        '["摄影", "入门", "技巧"]', 14, 7, 98765, '2023-07-05 14:30:00', '2023-07-06 10:45:00', 0),
       ('科学研究新发现',
        '最近有一项重要的科学研究发现了新的物质结构和特性，对未来的科技发展具有重要意义。在这里和大家分享这个发现的相关信息。',
        '["科学", "研究", "新发现"]', 16, 8, 12345, '2023-07-04 11:20:00', '2023-07-06 09:30:00', 0),
       ('健康饮食建议', '我是一名营养师，通过这篇帖子给大家提供一些建议和指导，帮助你们保持健康的饮食习惯和生活方式。',
        '["健康", "饮食", "建议"]', 25, 12, 13579, '2023-07-03 16:00:00', '2023-07-05 13:10:00', 0),
       ('最近的科技趋势',
        '科技行业发展迅速，最近有一些重要的科技趋势正在改变我们的生活。在这里和大家分享这些趋势的相关信息和讨论。',
        '["科技", "趋势", "分享"]', 17, 9, 24680, '2023-07-06 09:30:00', '2023-07-07 14:25:00', 0),
       ('美食节目推荐',
        '我最近看了一档非常好看的美食节目，《美食之旅》，里面介绍了各种美食和背后的故事。推荐给大家一起观看！',
        '["美食", "推荐", "节目"]', 15, 8, 54321, '2023-07-06 14:20:00', '2023-07-07 11:30:00', 0),
       ('新技术分享',
        '最近有一项新技术非常火热，名为区块链。我在这里分享一些关于区块链的基础知识和应用领域，希望对大家有所帮助。',
        '["技术", "区块链", "分享"]', 12, 6, 98765, '2023-07-05 10:45:00', '2023-07-06 09:15:00', 0),
       ('健身心得体会',
        '我是一个健身爱好者，最近我在健身方面有了一些新的心得体会，包括锻炼方法、饮食搭配等等。分享给大家，希望对你们有所启发。',
        '["健身", "心得", "分享"]', 20, 10, 12345, '2023-07-04 15:30:00', '2023-07-05 12:40:00', 0),
       ('旅行心得分享',
        '我刚刚完成了一次环球旅行，去了很多国家和城市。在这里分享我的旅行心得和经历，希望能给你们带来一些旅行的灵感。',
        '["旅行", "心得", "分享"]', 18, 9, 13579, '2023-07-02 12:10:00', '2023-07-04 08:20:00', 0),
       ('编程技巧交流', '作为一名程序员，我在这里分享一些编程技巧和经验，希望和大家一起交流学习，共同进步。',
        '["编程", "技巧", "交流"]', 30, 15, 24680, '2023-07-03 08:00:00', '2023-07-05 16:30:00', 0),
       ('电影推荐', '我最近看了一部非常精彩的电影，《星际穿越》，剧情扣人心弦，特效震撼。推荐给大家一起观看！',
        '["电影", "推荐", "星际穿越"]', 22, 11, 54321, '2023-07-07 13:15:00', '2023-07-07 17:20:00', 0),
       ('新手摄影入门', '对于想要学习摄影的新手，我在这里分享一些入门知识和技巧，希望能够帮助到你们。',
        '["摄影", "入门", "技巧"]', 14, 7, 98765, '2023-07-05 14:30:00', '2023-07-06 10:45:00', 0),
       ('科学研究新发现',
        '最近有一项重要的科学研究发现了新的物质结构和特性，对未来的科技发展具有重要意义。在这里和大家分享这个发现的相关信息。',
        '["科学", "研究", "新发现"]', 16, 8, 12345, '2023-07-04 11:20:00', '2023-07-06 09:30:00', 0),
       ('健康饮食建议', '我是一名营养师，通过这篇帖子给大家提供一些建议和指导，帮助你们保持健康的饮食习惯和生活方式。',
        '["健康", "饮食", "建议"]', 25, 12, 13579, '2023-07-03 16:00:00', '2023-07-05 13:10:00', 0),
       ('最近的科技趋势',
        '科技行业发展迅速，最近有一些重要的科技趋势正在改变我们的生活。在这里和大家分享这些趋势的相关信息和讨论。',
        '["科技", "趋势", "分享"]', 17, 9, 24680, '2023-07-06 09:30:00', '2023-07-07 14:25:00', 0),
       ('美食节目推荐',
        '我最近看了一档非常好看的美食节目，《美食之旅》，里面介绍了各种美食和背后的故事。推荐给大家一起观看！',
        '["美食", "推荐", "节目"]', 15, 8, 54321, '2023-07-06 14:20:00', '2023-07-07 11:30:00', 0),
       ('新技术分享',
        '最近有一项新技术非常火热，名为区块链。我在这里分享一些关于区块链的基础知识和应用领域，希望对大家有所帮助。',
        '["技术", "区块链", "分享"]', 12, 6, 98765, '2023-07-05 10:45:00', '2023-07-06 09:15:00', 0),
       ('健身心得体会',
        '我是一个健身爱好者，最近我在健身方面有了一些新的心得体会，包括锻炼方法、饮食搭配等等。分享给大家，希望对你们有所启发。',
        '["健身", "心得", "分享"]', 20, 10, 12345, '2023-07-04 15:30:00', '2023-07-05 12:40:00', 0),
       ('旅行心得分享',
        '我刚刚完成了一次环球旅行，去了很多国家和城市。在这里分享我的旅行心得和经历，希望能给你们带来一些旅行的灵感。',
        '["旅行", "心得", "分享"]', 18, 9, 13579, '2023-07-02 12:10:00', '2023-07-04 08:20:00', 0),
       ('编程技巧交流', '作为一名程序员，我在这里分享一些编程技巧和经验，希望和大家一起交流学习，共同进步。',
        '["编程", "技巧", "交流"]', 30, 15, 24680, '2023-07-03 08:00:00', '2023-07-05 16:30:00', 0),
       ('电影推荐', '我最近看了一部非常精彩的电影，《星际穿越》，剧情扣人心弦，特效震撼。推荐给大家一起观看！',
        '["电影", "推荐", "星际穿越"]', 22, 11, 54321, '2023-07-07 13:15:00', '2023-07-07 17:20:00', 0),
       ('新手摄影入门', '对于想要学习摄影的新手，我在这里分享一些入门知识和技巧，希望能够帮助到你们。',
        '["摄影", "入门", "技巧"]', 14, 7, 98765, '2023-07-05 14:30:00', '2023-07-06 10:45:00', 0),
       ('科学研究新发现',
        '最近有一项重要的科学研究发现了新的物质结构和特性，对未来的科技发展具有重要意义。在这里和大家分享这个发现的相关信息。',
        '["科学", "研究", "新发现"]', 16, 8, 12345, '2023-07-04 11:20:00', '2023-07-06 09:30:00', 0),
       ('健康饮食建议', '我是一名营养师，通过这篇帖子给大家提供一些建议和指导，帮助你们保持健康的饮食习惯和生活方式。',
        '["健康", "饮食", "建议"]', 25, 12, 13579, '2023-07-03 16:00:00', '2023-07-05 13:10:00', 0),
       ('最近的科技趋势',
        '科技行业发展迅速，最近有一些重要的科技趋势正在改变我们的生活。在这里和大家分享这些趋势的相关信息和讨论。',
        '["科技", "趋势", "分享"]', 17, 9, 24680, '2023-07-06 09:30:00', '2023-07-07 14:25:00', 0),
       ('美食节目推荐',
        '我最近看了一档非常好看的美食节目，《美食之旅》，里面介绍了各种美食和背后的故事。推荐给大家一起观看！',
        '["美食", "推荐", "节目"]', 15, 8, 54321, '2023-07-06 14:20:00', '2023-07-07 11:30:00', 0);


-- 帖子点赞表（硬删除）
create table if not exists post_thumb
(
    id         bigint auto_increment comment 'id' primary key,
    postId     bigint                             not null comment '帖子 id',
    userId     bigint                             not null comment '创建用户 id',
    createTime datetime default CURRENT_TIMESTAMP not null comment '创建时间',
    updateTime datetime default CURRENT_TIMESTAMP not null on update CURRENT_TIMESTAMP comment '更新时间',
    index idx_postId (postId),
    index idx_userId (userId)
) comment '帖子点赞';

-- 帖子收藏表（硬删除）
create table if not exists post_favour
(
    id         bigint auto_increment comment 'id' primary key,
    postId     bigint                             not null comment '帖子 id',
    userId     bigint                             not null comment '创建用户 id',
    createTime datetime default CURRENT_TIMESTAMP not null comment '创建时间',
    updateTime datetime default CURRENT_TIMESTAMP not null on update CURRENT_TIMESTAMP comment '更新时间',
    index idx_postId (postId),
    index idx_userId (userId)
) comment '帖子收藏';
